<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><title>Proud Blog - moCloudでHubotを動かそう！！</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><link href="/stylesheets/all.css" rel="stylesheet" /></head><body><header><h1><a href="/">Proud Blog</a></h1><ul class="header-social"><li><a href="https://www.facebook.com/proudit/"><i class="fa fa-facebook-square fa-2x"></i></a></li><li><a href="https://github.com/proudit"><i class="fa fa-github fa-2x"></i></a></li></ul></header><div id="main" role="main"><article><h1>moCloudでHubotを動かそう！！</h1><div class="tag-labels"><small class="tag-label">moCloud</small><small class="tag-label">Hubot</small><small class="tag-label">Slack</small></div><br /><p><img class="author" src="/images/authors/kohei.png" /> <i class="fa fa-pencil"></i>Written by    <b>Kohei Yamada</b>　<i class="fa fa-clock-o"></i>Posted on  <b>2016/01/25</b></p><p><div style="width:74px;height:22px;float:left;"><div style="margin-left:-5px"><a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="proudit_inc" data-lang="ja" data-hashtags="proudblog" data-dnt="true">ツイート</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div></div><div style="width:120px;height:22px;float:left;"><iframe src="//www.facebook.com/v2.0/plugins/like.php?href=http%3A%2F%2Fblog.proudit.jp&amp;width&amp;layout=button&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=90&amp;appId=1679223382318515" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:90px;" allowTransparency="true"></iframe></div></p><hr /><br /><p>先日、「Mobingi moCloud ハンズオン」に行ってきました。<br>
<a href="https://mobingi.doorkeeper.jp/events/37092">https://mobingi.doorkeeper.jp/events/37092</a></p>

<p>内容としては「moCloudの説明から実際にアプリケーションを作成する」を前半で行い、後半では「作成したアプリケーションを利用してサービスをデプロイする」を行いました。moCloudというのをまったく知らずに参加したこのハンズオンでしたが、とてもわかりやすかったです。</p>

<p>そこでMobingiの吉田真吾さんが「moCloudを使ってHubotを動かす」という内容のハンズオンをしてくださったのでその内容(手順)をまとめてみました。</p>

<h1 id="概要">概要</h1>

<p>moCloud上のアプリケーションにHubotを動かすスクリプトをデプロイし、Slackと連携させてHubotと会話をする。<br>
※Hubotを動かすスクリプトはあらかじめ用意されています。</p>

<h1 id="0.事前準備">0.事前準備</h1>

<p>・<a href="../../../2016/02/01/regist-gihub.html">GitHubアカウントの作成</a><br>
・Slackのインストールとアカウント作成</p>

<h1 id="1.-リポジトリのfork(github)">1. リポジトリのfork(GitHub)</h1>

<h4 id="1-1.ログイン">1-1.ログイン</h4>

<p>GitHubにログインします。<br>
<a href="https://github.com">https://github.com</a></p>

<h4 id="1-2.リポジトリのfork">1-2.リポジトリのfork</h4>

<p>以下のリポジトリへアクセスし、forkします。<br>
<a href="https://github.com/yoshidashingo/hubot-mocloud">https://github.com/yoshidashingo/hubot-mocloud</a></p>

<p><img alt="20160124_github01.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/88696f9e-d46a-c9a0-2091-0f7965637488.png" /></p>

<p>複数の組織に所属している場合は以下のように聞かれるので、forkするリポジトリを指定します。<br>
<img alt="20160124_github02.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/dac20449-57ca-cbd3-0cd7-543a50096ef0.png" /></p>

<p>forkすると自分のリポジトリのリストに表示されます。<br>
<img alt="20160124_github03.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/6fc1b47e-3d2a-2b86-527d-3d62c0fddc7e.png" /></p>

<p><img alt="20160124_github04.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/65f412e5-cb6d-33e0-31e9-405ee923d8ef.png" /></p>

<h1 id="2.hubotのインストール(slack)">2.Hubotのインストール(Slack)</h1>

<h4 id="2-1.ログイン">2-1.ログイン</h4>

<p>ブラウザからSlackにログインし、Hubotページにアクセスします。<br>
<a href="https://slack.com/apps/A0F7XDU93-hubot">https://slack.com/apps/A0F7XDU93-hubot</a></p>

<h4 id="2-2.hubotのインストール">2-2.Hubotのインストール</h4>

<p>「Install」をクリックします。<br>
<img alt="20160123_slack-hubot01.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/c99fc360-55f8-d21d-b1f3-0886ec171cb4.png" /></p>

<h4 id="2-3.usernameの設定">2-3.Usernameの設定</h4>

<p>「Username」を入力して「Add Hubot Integration」をクリックします。<br>
ここで入力した「Username」がHubotの名前となりSlack上で表示されます。<br>
<img alt="20160123_slack-hubot02.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/1dace3c2-1129-9706-f2d6-0ff224293f49.png" /></p>

<h4 id="2-4.環境変数の確認">2-4.環境変数の確認</h4>

<p>環境変数が表示されていることを確認して完了です。<br>
<img alt="20160123_slack-hubot03.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/a161860e-f033-844e-7270-0f3916df403a.png" /><br>
※この環境変数は後で利用します。</p>

<h1 id="3.アプリケーションの作成(mocloud)">3.アプリケーションの作成(moCloud)</h1>

<h4 id="3-1.ログイン">3-1.ログイン</h4>

<p>moCloudにログインします。<br>
<a href="https://mocloud.io/">https://mocloud.io/</a></p>

<h4 id="3-2.アプリケーションの作成">3-2.アプリケーションの作成</h4>

<p>左サイドにある「+ アプリケーションの作成」をクリックします。<br>
<img alt="20160122_mobingi01.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/989d2273-b9b0-5711-2722-4fe44668be07.png" /></p>

<h4 id="3-3.アプリケーション情報の設定">3-3.アプリケーション情報の設定</h4>

<p>任意のアプリケーション名とドメインを入力し、利用するリージョンとインスタンスを選択します。<br>
<img alt="20160122_mobingi02.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/72b79a30-d65b-a284-fcae-89f15eec38eb.png" /></p>

<h4 id="3-4.イメージ設定①">3-4.イメージ設定①</h4>

<p>作成するアプリケーションのイメージを選択します。<br>
今回は「PHP Stack Ubuntu 14.04, php 5.6, Apache」を選択します。<br>
<img alt="20160122_mobingi03.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/ae30c714-2084-7696-c45c-8482569aacc3.png" /></p>

<h4 id="3-5.イメージ設定②">3-5.イメージ設定②</h4>

<p>「4.イメージの設定①」で選択したイメージをクリックすると「Extra PHP Configuration」の設定画面がポップアップされます。<br>
今回はデフォルト設定のままで「実行」をクリックします。<br>
<img alt="20160122_mobingi04.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/7b7417d7-b002-d8c5-6450-0996ccaee629.png" /></p>

<p>すると、選択したイメージがブルーの色になります。<br>
<img alt="20160122_mobingi05.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/a85fb6b8-7012-2d79-42dc-f4f8f0a3484e.png" /></p>

<h4 id="3-6.アプリケーションの作成">3-6.アプリケーションの作成</h4>

<p>以上の設定を行ったら「アプリケーションの作成」をクリックします。<br>
<img alt="20160122_mobingi06.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/373a026e-93df-1fbc-4011-b7f64dc5cabe.png" /></p>

<p>すると、「既存アプリケーション」に画面が切り替わり、アプリケーションの作成が始まります。<br>
<img alt="20160122_mobingi07.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/21903528-14c1-516d-77e8-6dcb95af02df.png" /></p>

<p>ステータスが「初期化中」→「実行中」になったら作成完了です。<br>
※ちなみに自分は実行中になるまで7分ほどかかりました。<br>
<img alt="20160122_mobingi09.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/491fa8c6-5a5f-2336-2027-13a6ac67754f.png" /></p>

<h1 id="4.コードのデプロイ">4.コードのデプロイ</h1>

<h4 id="4-1.アプリケーションの選択">4-1.アプリケーションの選択</h4>

<p>作成したアプリケーション名をクリックします。<br>
<img alt="20160122_mobingi10.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/07d72860-26f3-4ee4-15d2-4b812e59b285.png" /></p>

<h4 id="4-2.リポジトリの選択">4-2.リポジトリの選択</h4>

<p>「コード」タブをクリックするとGitリポジトリ設定が表示されるので、そこで「GitHub」の「パブリックリポジトリ」を選択します。<br>
<img alt="20160122_mobingi11.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/e76dfb22-99ce-eeec-00ee-c666dfe117da.png" /></p>

<h4 id="4-3.リポジトリとの接続">4-3.リポジトリとの接続</h4>

<p>フォークした「自分のリポジトリ/hubot-mocloud」の「master」リポジトリを選択し、「接続」をクリックします。</p>

<p>「成功」と出れば接続が完了です。<br>
<img alt="20160122_mobingi12.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/864c944e-125f-13a7-b70c-fdfe7aa0ce64.png" /></p>

<h4 id="4-4.環境変数の設定①">4-4.環境変数の設定①</h4>

<p>「設定」タブをクリックします。<br>
<img alt="20160122_mobingi13.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/3ad10dcb-4d6f-667b-22d0-2bf33d9a923b.png" /></p>

<h4 id="4-5.環境変数の設定②">4-5.環境変数の設定②</h4>

<p>「Browse Apps &gt; Hubot &gt; Configurations on Proudit Inc &gt; Edit configuration」に記載されている環境変数を入力して「+」で追加します。<br>
<img alt="20160123_slack-hubot03.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/8debffbc-a0d8-62c0-d374-190b7e349af6.png" /></p>

<p><img alt="20160122_mobingi14.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/debfd4f9-b845-0c4a-926f-cf0bfa24ad7a.png" /></p>

<h4 id="4-6.環境変数の設定③">4-6.環境変数の設定③</h4>

<p>変数が追加されたのを確認したら「変更を保存」をクリックして保存します。<br>
<img alt="20160122_mobingi15.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/41cb683a-aefe-c78d-40f3-02be06d84b86.png" /></p>

<p>緑でSuccessが表示されれば設定完了です。<br>
<img alt="20160122_mobingi16.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/6fa27ffa-91c1-bbdc-08cc-5f957b530fd3.png" /></p>

<p>しばらく待つとslackに表示されているhubotのランプが緑になります。<br>
<img alt="20160122_mobingi17.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/d3d7a7a0-4799-4020-3f3d-d9b7d1532f28.png" /></p>

<h1 id="5.let&#39;s-hubot!!">5.Let&#39;s Hubot!!</h1>

<p>以上で準備が整いました。それでは話しかけてみましょう。<br>
「hello」と話しかけると「hello!」を返事をしてくれます。<br>
<img alt="20160122_mobingi18.png" src="https://qiita-image-store.s3.amazonaws.com/0/82090/6f7d0594-7f9d-5011-8851-55b9b281463f.png" /></p>

<p>ここではあらかじめ準備してくださったリポジトリをforkしてデプロイしています。<br>
もし他にもいろいろ試したいということであれば、今回forkしたソースを編集してみてください。「hello」以外にも会話ができるようになります。</p>

<h1 id="最後に">最後に</h1>

<p>今回はハンズオンの第一回だったみたいです。今回のハンズオンを通じてmoCloudというのを知り、とても興味深いサービスだと感じました。なので今後もハンズオンとかがあったら参加しようと思います。</p>

<p>/&gt; Mobingi 吉田真吾さん<br>
わかりやすいハンズオンありがとうございました。</p>

<p>また、より詳しく知りたい方は吉田さんが書いたブログ「<a href="http://yoshidashingo.hatenablog.com/entry/2015/12/15/105841">moCloudでHubotを動かしてSlack上で遊ぼう</a>」の記事を参照してみてください。</p>
<br /><br><div style="width:74px;height:22px;float:left;"><div style="margin-left:-5px"><a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="proudit_inc" data-lang="ja" data-hashtags="proudblog" data-dnt="true">ツイート</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div></div><div style="width:120px;height:22px;float:left;"><iframe src="//www.facebook.com/v2.0/plugins/like.php?href=http%3A%2F%2Fblog.proudit.jp&amp;width&amp;layout=button&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=90&amp;appId=1679223382318515" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:90px;" allowTransparency="true"></iframe></div></br><br /><br /></article><aside><fieldset><h2>最近の投稿</h2><ol><li> <i class="fa fa-caret-right"><a href="/2016/03/28/how-to-use-docker-from-login-to-commit.html">Dockerコンテナのリポジトリ管理　DockerHubへログイン、イメージの取得〜更新、コミットまで。</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/03/24/to-update-aws-cli.html">aws-cliのバージョンをアップグレードする。for MacOS</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/03/15/itenoiwai-next.html">移転祝いを頂きました_(2)</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/03/14/jawsdays2016.html">JAWSDAYS2016に参加してきました！</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/03/11/itenosirase.html">移転しました！</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/03/08/to-monitor-the-traffic-using-the-vnstat.html">vnstatで手軽にtrafiicをモニタリング</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/02/29/a-s3bucket-is-allowed-access-only-from-cloudfront.html">S3の特定バケットへのアクセスを特定のCloudFrontからのみ許可する。</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/02/22/how-to-use-lsof.html">lsofを使ってプロセスが利用しているポートを確認する。</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/02/15/comfirm-a-version-of-redmine.html">Redmineのバージョンを確認する。</a></i></li><li> <i class="fa fa-caret-right"><a href="/2016/02/14/jawsdays2016-workshop-speker.html">Jawsdays2016 ハンズオンブースのスピーカーやります！</a></i></li></ol></fieldset><fieldset><h2>投稿者</h2><ol><li> <i class="fa fa-pencil"><a href="/toguma.html">toguma</a></i></li><li> <i class="fa fa-pencil"><a href="/kohei.html">kohei</a></i></li><li> <i class="fa fa-pencil"><a href="/proudcloud.html">proudcloud</a></i></li></ol></fieldset><fieldset><h2>タグ</h2><ol><li> <i class="fa fa-tag"><a href="/tags/aws.html">AWS (8)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/github.html">GitHub (5)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/circleci.html">CircleCI (4)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/s3.html">S3 (3)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/lambda.html">lambda (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/cognito.html">cognito (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/waf.html">WAF (3)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/cloudfront.html">CloudFront (4)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/redmine.html">Redmine (2)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/amazonlinux.html">AmazonLinux (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/ec2.html">EC2 (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/mocloud.html">moCloud (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/hubot.html">Hubot (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/slack.html">Slack (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/jawsdays2016.html">jawsdays2016 (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/linux.html">Linux (2)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/vnstat.html">vnstat (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/vnstati.html">vnstati (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/お知らせ.html">お知らせ (3)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/jawsdays.html">JAWSDAYS (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/aws-cli.html">aws-cli (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/macos.html">MacOS (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/docker.html">docker (1)</a></i></li><li> <i class="fa fa-tag"><a href="/tags/dockerhub.html">DockerHub (1)</a></i></li></ol></fieldset><fieldset><h2>アーカイブ</h2><ol><li> <i class="fa fa-calendar"><a href="/2016.html">2016 (16)</a></i></li><li> <i class="fa fa-calendar"><a href="/2015.html">2015 (3)</a></i></li></ol></fieldset></aside></div><footer><p><i class="fa fa-copyright"></i> <a href="/">Proud Blog</a> - Powerd by <a href="http://www.proudit.jp/">Proudit Inc.</a></p></footer></body></html>